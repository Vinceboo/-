# 🎬 毒舌电影评价

> [!NOTE]
> 本文档提供了项目的全面概述。随着新功能的添加，请持续更新。

## 🌟 项目概览

这是一个用于电影探索和 AI 智能交互的微信小程序，旨在提供沉浸式的电影发现体验。
好吧。。。前面是AI生成，这里是真实描述==
这个项目是为了跑通小程序发布的流程、利用coze搭建agent，，，

- **20260219 记**：只实现了25年春节档的影评，后续规划会补齐电影
   这个取决于爬取数据的方式，目前还是手动，人工输入电影id，然后进行爬取，后续会改为自动化
   


---
**核心功能：**

*   **Netflix 风格主页**：沉浸式、深色主题的电影浏览体验。
*   **Apple HIG 设计**：遵循 iOS 人机界面指南（深色模式）的一致性 UI。
*   **AI 聊天助手**：关于电影的实时流式对话，支持打字机效果。

## 🛠 技术栈

*   **框架**：微信小程序 (原生)
*   **语言**：TypeScript (`.ts`)
*   **样式**：Less (`.less` -> `.wxss`)
*   **渲染引擎**：Skyline
*   **后端 API**：`http://127.0.0.1:3000` (开发环境 Localhost)

---

## 📂 目录结构

```plaintext
minipro_0217/
├── .claude/                # AI 助手技能与配置
├── api/                    # (后端/API 相关代码)
├── miniprogram/            # 小程序主源码
│   ├── components/         # 可复用 UI 组件
│   │   ├── navigation-bar/ # 自定义导航栏 (基于 WeUI)
│   │   └── wemark/         # Markdown 渲染组件
│   ├── images/             # 静态资源 (图标, 占位图)
│   ├── pages/              # 应用页面
│   │   ├── index/          # 主页 (电影列表, 顶部推荐)
│   │   ├── chat/           # AI 聊天界面 (流式 API)
│   │   └── logs/           # 系统日志
│   ├── utils/              # 工具函数 & 模拟数据
│   │   └── movie.data.ts   # 静态电影数据 (Mock)
│   ├── app.ts              # 全局生命周期 & 数据
│   ├── app.json            # 全局配置 (路由, 窗口)
│   └── app.less            # 全局样式
├── project.config.json     # 微信开发者工具配置
└── tsconfig.json           # TypeScript Config
```

---

## 🧩 核心模块详情

### 1. 主页 (`miniprogram/pages/index/`)

**角色**：电影探索的落地页。

*   **设计风格**："Netflix x Apple HIG" 深色主题，沉浸式体验。
*   **关键组件**：
    *   **顶部推荐 (Hero Banner)**：带渐变遮罩的精选电影大图。
    *   **横向滚动**："热映榜单" (Top Rated)。
    *   **竖向列表**："全部影片"。
*   **交互逻辑**：点击任意电影海报或列表项，跳转至 **聊天页面 (Chat Page)**，并携带电影名称参数。
*   **数据源**：`utils/movie.data.ts` (模拟数据)。

### 2. AI 聊天页 (`miniprogram/pages/chat/`)

**角色**：用于电影查询的交互式 AI 助手。

*   **设计风格**：Apple HIG 深色模式 (类 iMessage 风格)。
    *   **用户气泡**：系统蓝 (`#0A84FF`)。
    *   **AI 气泡**：系统灰 (`#2C2C2E`)。
*   **核心功能**：
    *   **自动发送**：进入页面时自动发送电影名称，建立对话上下文。
    *   **流式响应**：连接 `POST /api/chat/stream` 接口。
    *   **SSE 处理**：通过 `wx.request` 的分块传输 (chunked transfer) 手动解析 Server-Sent Events，实现逐字显示效果。

---

## 🔌 后端集成说明

聊天功能依赖于本地专用后端服务，请确保服务已启动。

*   **接口地址**：`http://127.0.0.1:3000/api/chat/stream`
*   **请求方法**：`POST`
*   **数据格式**：Server-Sent Events (SSE)

> [!IMPORTANT]
> 这是一个本地开发接口。在发布生产环境前，请将 `chat.ts` 中的 `API_BASE` 替换为真实的 HTTPS 域名。

---

## 🎨 设计规范 (Apple HIG)

本项目严格遵循 Apple Human Interface Guidelines 的深色模式规范：

1.  **字体排印**：使用 San Francisco 系统字体，正文保持 17pt 以确保易读性。
2.  **配色方案**：
    *   背景色：`#000000` (纯黑)
    *   卡片背景：`#1C1C1E` (二级系统背景)
    *   主色调：`#0A84FF` (系统蓝)
3.  **布局细节**：
    *   统一的内边距 (16px / 32rpx)。
    *   平滑的圆角设计 (12px - 20px)。

---

## 📝 维护日志

*   **2026-02-18**: 项目初始化，完成基础架构文档。
*   **2026-02-18**: 核心功能上线（电影聊天、流式 API 支持）。
*   **2026-02-18**: 修复导航参数编码问题，完成文档中文化。
